

<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>מאגר זיהוי לוחמים</title>

  <meta name="description" content="מאגר נתונים מתעדכן של לוחמים - נתונים מתעדכנים באופן רציף">
  <meta name="keywords" content="מאגר, לוחמים, זיהוי, נתונים">
  <meta name="author" content="@MiddleEastBuka">
  <meta name="robots" content="index, follow">

  <!-- Open Graph -->
  <meta property="og:title" content="מאגר זיהוי לוחמים">
  <meta property="og:description" content="מאגר נתונים מתעדכן של לוחמים - נתונים מתעדכנים באופן רציף">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="he_IL">
  <meta property="og:image" content="https://pbs.twimg.com/profile_images/1734469370716274688/K7wQUSar_400x400.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="מאגר זיהוי לוחמים">
  <meta name="twitter:description" content="מאגר נתונים מתעדכנים באופן רציף">
  <meta name="twitter:image" content="https://pbs.twimg.com/profile_images/1734469370716274688/K7wQUSar_400x400.png">

  <!-- Icons -->
  <link rel="icon" type="image/png" href="https://pbs.twimg.com/profile_images/1734469370716274688/K7wQUSar_400x400.png">
  <link rel="apple-touch-icon" href="https://pbs.twimg.com/profile_images/1734469370716274688/K7wQUSar_400x400.png">

  <!-- Theme/PWA -->
  <meta name="theme-color" content="#3b82f6">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="מאגר לוחמים">

  <!-- חשוב: הסרנו meta של X-Content-Type-Options/X-XSS-Protection (יש להגדיר ב־HTTP headers, לא ב-HTML) -->

  <!-- CSS + Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer">
  <link rel="stylesheet" href="style.css">

  <!-- Preconnects -->
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="preload" href="script.js" as="script">
</head>
<body>
  <!-- דילוג מהיר לתוכן -->
  <a class="skip-link" href="#contentArea">דלג לתוכן</a>

  <!-- כפתור שפה -->
  <button id="langToggle"
          class="language-toggle"
          type="button"
          aria-label="החלף שפה / Switch language"
          aria-pressed="false">EN</button>

  <!-- מעטפת האפליקציה -->
  <main id="app" class="container">
    <!-- כותרת אתר -->
    <header id="header" class="site-header" role="banner">
      <h1 id="title">מאגר זיהוי לוחמים</h1>
      <p id="subtitle">חיפוש, מיון וסינון רשומות</p>
    </header>

    <!-- פס סטטיסטיקות תואם script.js -->
    <div class="stats-bar" role="region" aria-label="סטטיסטיקות">
      <div class="stat">
        <div id="statsTotalLabel" class="stat-label">סה״כ רשומות</div>
        <div id="statsTotal" class="stat-value">0</div>
      </div>
      <div class="stat">
        <div id="statsWithDescLabel" class="stat-label">עם תיאור מסור</div>
        <div id="statsWithDesc" class="stat-value">0</div>
      </div>
      <div class="stat">
        <div id="statsWithRankLabel" class="stat-label">עם דרגה</div>
        <div id="statsWithRank" class="stat-value">0</div>
      </div>
      <div class="stat">
        <div id="statsLeadersLabel" class="stat-label">בכירים</div>
        <div id="statsLeaders" class="stat-value">0</div>
      </div>
      <div class="stat">
        <div id="statsUpdatedLabel" class="stat-label">עודכן לאחרונה</div>
        <div id="statsUpdated" class="stat-value">—</div>
      </div>
    </div>

    <!-- סרגל פילטרים -->
    <section id="filtersBar" class="filters-bar" role="search" aria-label="אפשרויות חיפוש">
      <!-- חיפוש -->
      <div class="filter-group">
        <label id="searchLabel" for="searchInput">חפש לפי שם/תיאור</label>
        <input type="search" id="searchInput" placeholder="🔍 חפש שם, מיקום או תיאור…" autocomplete="off" spellcheck="false" aria-label="חיפוש חופשי">
      </div>

      <!-- מיקום -->
      <div class="filter-group">
        <label id="locationLabel" for="locationFilter">מיקום</label>
        <select id="locationFilter" aria-label="סינון לפי מיקום">
          <option value="">הכל</option>
        </select>
      </div>

      <!-- ארגון -->
      <div class="filter-group">
        <label id="organizationLabel" for="organizationFilter">ארגון</label>
        <select id="organizationFilter" aria-label="סינון לפי ארגון">
          <option value="">הכל</option>
        </select>
      </div>

      <!-- דרגה/תפקיד -->
      <div class="filter-group">
        <label id="rankLabel" for="rankFilter">דרגה/תפקיד</label>
        <select id="rankFilter" aria-label="סינון לפי דרגה">
          <option value="">הכל</option>
        </select>
      </div>

      <!-- טווח תאריכים -->
      <div class="filter-group" id="dateRangeGroup">
        <label id="dateRangeLabel" for="dateFrom">טווח תאריכים</label>
        <div class="date-range">
          <input type="date" id="dateFrom" name="dateFrom" aria-label="סנן מתאריך">
          <span class="date-sep" aria-hidden="true">–</span>
          <input type="date" id="dateTo" name="dateTo" aria-label="סנן עד תאריך">
        </div>
        <button id="clearDatesBtn" class="btn btn-secondary btn-small" type="button" aria-label="נקה תאריכים">
          <i class="fas fa-times" aria-hidden="true"></i>
          <span>נקה תאריכים</span>
        </button>
      </div>

      <!-- פעולות -->
      <div class="filter-actions">
        <button id="resetFiltersButton" class="btn btn-secondary" type="button" aria-label="איפוס כל הפילטרים">
          <i class="fas fa-rotate-left" aria-hidden="true"></i>
          <span>אפס פילטרים</span>
        </button>
        <button id="exportCSVButton" class="btn" type="button" aria-label="ייצוא ל־CSV">
          <i class="fas fa-file-export" aria-hidden="true"></i>
          <span>ייצוא CSV</span>
        </button>
        <button id="viewToggle" class="btn btn-secondary" type="button" aria-pressed="true" aria-label="החלף בין תצוגת טבלה לכרטיסים">
          <i class="fas fa-table" aria-hidden="true"></i>
          <span id="viewTableLabel">טבלה</span>
        </button>
      </div>
    </section>

    <!-- סרגל תוצאות + פגינציה תואם script.js -->
    <div class="results-bar">
      <div id="resultsCount" class="results-count" aria-live="polite">תוצאות: 0</div>
      <div class="pagination-controls">
        <button id="prevPage" class="btn btn-secondary" type="button" aria-label="עמוד קודם">◀</button>
        <span id="paginationInfo" class="pagination-info" role="status" aria-live="polite">עמוד 1 מתוך 1</span>
        <button id="nextPage" class="btn btn-secondary" type="button" aria-label="עמוד הבא">▶</button>
      </div>
    </div>

    <!-- אזור התוכן -->
    <section id="contentArea" class="content-area" aria-live="polite" aria-label="תוצאות"></section>

    <!-- שכבת טעינה -->
    <div id="loadingOverlay" class="loading-overlay" aria-hidden="true">
      <div class="spinner" aria-hidden="true"></div>
      <div class="loading-text">טוען נתונים…</div>
    </div>
  </main>

  <!-- כפתור לראש העמוד -->
  <button id="backToTop" class="back-to-top" type="button" aria-label="חזרה לראש העמוד" title="חזרה לראש העמוד">↑</button>

  <!-- מקור הנתונים (CSV) -->
  <div id="dataCSV" data-url="data.csv" hidden></div>

  <!-- הודעות טוסט -->
  <div id="toastContainer" class="toast-container" role="log" aria-live="assertive" aria-atomic="true" aria-label="התראות מערכת"></div>

  <!-- תחתית (מידע משפטי) -->
  <footer class="footer-info container" role="contentinfo">
    <p><strong>איסוף נתונים:</strong> הנתונים באתר זה נאספו על ידי
      <a href="https://x.com/MiddleEastBuka/status/1916380369030369745" target="_blank" rel="noopener noreferrer">@MiddleEastBuka</a>
    </p>
    <p><strong>הערה משפטית:</strong> הנתונים מוצגים כפי שנאספו ועלולים להכיל טעויות. האתר אינו אחראי לדיוק המידע.</p>
    <p>© <span id="currentYear"></span> כל הזכויות שמורות</p>
  </footer>

  <!-- ספריות/סקריפטים -->
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script defer src="script.js"></script>

  <!-- רישום Service Worker (אופציונלי) + שנת זכויות -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').catch(() => {});
      });
    }
    document.getElementById('currentYear').textContent = new Date().getFullYear();
  </script>
</body>
</html>

