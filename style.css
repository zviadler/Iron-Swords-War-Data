/* ===== משתנים ועקרונות ===== */
:root{
  --space-xs: .25rem;
  --space-sm: .5rem;
  --space-md: .75rem;
  --space-lg: 1rem;
  --space-xl: 1.5rem;
  --space-2xl: 2.25rem;

  --radius-sm: .25rem;
  --radius-md: .5rem;
  --radius-lg: .75rem;
  --radius-xl: 1rem;

  --font-size-xs: .8rem;
  --font-size-sm: .95rem;
  --font-size-md: 1rem;
  --font-size-lg: 1.25rem;
  --font-size-xl: 1.6rem;

  --container-max: 1200px;

  --primary-300: #60a5fa;
  --primary-500: #3b82f6;
  --primary-700: #1d4ed8;

  --bg-primary: #0b0f1c;
  --bg-elev: #0f1424;
  --bg-panel: #0d1220;

  --text-primary: #e5e7eb;
  --text-secondary: #9ca3af;
  --muted: #94a3b8;

  --border-color: #1f2937;

  --shadow-xs: 0 1px 2px rgba(0,0,0,.2);
  --shadow-sm: 0 2px 6px rgba(0,0,0,.25);
  --shadow-md: 0 6px 18px rgba(0,0,0,.3);

  --transition-fast: .2s;
  --transition-med: .35s;

  --focus-ring: 0 0 0 3px rgba(59,130,246,.35);
}

/* ===== בסיס ===== */
*,
*::before,
*::after{ box-sizing:border-box; }

html{
  -webkit-text-size-adjust: 100%;
  scroll-behavior: smooth;
}

body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  font-size: var(--font-size-md);
  color: var(--text-primary);
  background:
    radial-gradient(60rem 30rem at 120% -10%, rgba(59,130,246,.08), transparent 60%),
    radial-gradient(40rem 20rem at -20% 120%, rgba(59,130,246,.05), transparent 55%),
    linear-gradient(180deg, #0b0f1c 0%, #0b0f1c 100%);
  min-height: 100vh;
}

img{ max-width:100%; display:block; }

a{ color: var(--primary-300); text-decoration: none; }
a:hover{ color:#9ec1ff; text-decoration: underline; }

button, input, select{ font: inherit; color: inherit; }
button{ cursor:pointer; }

:focus-visible{ outline: none; box-shadow: var(--focus-ring); }

/* ===== קונטיינרים ===== */
.container{
  width: min(100%, var(--container-max));
  margin-inline:auto;
  padding-inline: var(--space-xl);
}

/* ===== טיפוגרפיה ===== */
h1,h2,h3,h4,h5,h6{
  margin:0 0 var(--space-sm) 0;
  line-height:1.25;
}
h1{ font-size: clamp(1.6rem, 2vw + 1rem, 2.1rem); }
h2{ font-size: clamp(1.3rem, 1.5vw + 1rem, 1.6rem); }
h3{ font-size: 1.2rem; }
p{ margin:0 0 var(--space-md) 0; color: var(--text-secondary); }

/* ===== כותרת עמוד ===== */
.page-hero{
  padding-block: var(--space-xl);
  text-align:center;
}
.page-hero h1{
  font-weight: 800;
  letter-spacing: .3px;
  background: linear-gradient(135deg, #fff, #9ec1ff);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}
.page-hero p{
  margin-top: var(--space-sm);
  color: var(--text-secondary);
}

/* ===== סרגל עליון ===== */
.topbar{
  position: sticky; top:0; z-index: 1000;
  background: rgba(11,15,28,.75); backdrop-filter: blur(8px);
  border-bottom: 1px solid var(--border-color);
}
.topbar-inner{
  display:flex; align-items:center; justify-content:space-between;
  gap: var(--space-lg);
  width: min(100%, var(--container-max));
  margin-inline:auto; padding: .8rem var(--space-xl);
}
.brand{
  display:flex; align-items:center; gap: var(--space-sm);
  font-weight: 800;
}
.brand i{ color: var(--primary-300); }

/* ===== פילטרים ===== */
.filters-bar{
  display:grid; gap: var(--space-md);
  grid-template-columns: repeat(12, 1fr);
  align-items:end;
  padding: var(--space-xl);
  border-bottom:1px solid var(--border-color);
  background: linear-gradient(180deg, rgba(255,255,255,.02), transparent);
}
.filter-group{ display:grid; gap: var(--space-xs); }
.filter-actions{ display:flex; gap: var(--space-sm); justify-content:flex-end; align-items:center; grid-column: span 6; }

.filters-bar .filter-group:nth-child(1){ grid-column: span 4; }
.filters-bar .filter-group:nth-child(2){ grid-column: span 2; }
.filters-bar .filter-group:nth-child(3){ grid-column: span 2; }
.filters-bar .filter-group:nth-child(4){ grid-column: span 2; }
#dateRangeGroup{ grid-column: span 6; }

@media (max-width: 900px){
  .filters-bar{ grid-template-columns: repeat(6,1fr); gap: var(--space-md); }
  .filters-bar .filter-group:nth-child(1){ grid-column: span 6; }
  .filters-bar .filter-group:nth-child(2),
  .filters-bar .filter-group:nth-child(3),
  .filters-bar .filter-group:nth-child(4){ grid-column: span 3; }
  #dateRangeGroup{ grid-column: span 6; }
  .filter-actions{ grid-column: span 6; justify-content: stretch; }
}

/* שדות/פקדים */
label{ font-size: .9rem; color: var(--muted); }
input[type="text"],
select{
  width:100%;
  background: var(--bg-elev);
  border:1px solid var(--border-color);
  color: var(--text-primary);
  border-radius: var(--radius-md);
  padding: .55rem .7rem;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
}
input::placeholder{ color:#6b7280; }

/* קבוצה לתאריך */
.date-range{ display:flex; align-items:center; gap: var(--space-sm); }
.date-range input[type="date"]{ min-width: 11ch; }

/* ===== כפתורים ===== */
.btn{
  display:inline-flex; align-items:center; gap:.5rem;
  padding: .6rem .9rem;
  background: var(--primary-500);
  color:#fff; border:none; border-radius: var(--radius-md);
  cursor:pointer; box-shadow: var(--shadow-xs);
  transition: transform .05s ease, background var(--transition-fast) ease;
  white-space: nowrap;
}
.btn:hover{ background: var(--primary-700); }
.btn:active{ transform: translateY(1px); }
.btn i{ font-size: .95em; }

.btn-block{ width:100%; justify-content:center; }

.btn-secondary{
  background: var(--bg-elev);
  color: var(--text-primary);
  border:1px solid var(--border-color);
}
.btn-secondary:hover{ background:#1e2230; }
.btn-small{
  min-width:auto;
  padding: .45rem .6rem;
  font-size: .9rem;
  border-radius: var(--radius-sm);
}

/* ===== אזור תוכן ===== */
.content-area{ padding: var(--space-lg) var(--space-xl) var(--space-xl); }

/* ===== כרטיסים ===== */
.card{
  background: var(--bg-elev);
  border:1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  margin-block: var(--space-md);
  box-shadow: var(--shadow-xs);
}
.card-title{ margin:0 0 var(--space-sm) 0; font-size: 1.1rem; }
.card-list{
  display:grid; grid-template-columns: max-content 1fr; gap: var(--space-xs) var(--space-lg);
}
.card-list dt{ color: var(--muted); }
.card-list dd{ margin:0; }

/* ===== טבלה ===== */
.data-table{
  width:100%;
  border-collapse: collapse;
  background: var(--bg-elev);
  border:1px solid var(--border-color);
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: var(--shadow-xs);
}
.data-table caption{
  text-align:start; padding: var(--space-md) var(--space-lg);
  color: var(--text-secondary);
}
.data-table thead th{
  position: sticky; top: 0;
  background: #0f1322; color:#cbd5e1;
  font-weight:700; font-size: .95rem;
  text-align:start;
  padding: .6rem .8rem;
  border-bottom:1px solid var(--border-color);
  user-select: none;
}
.data-table tbody td{
  padding: .6rem .8rem;
  border-top:1px solid rgba(255,255,255,.04);
}
.data-table tbody tr:hover{ background: #0e1427; }
.data-table tbody tr:nth-child(odd){ background: rgba(255,255,255,.01); }

.table-controls{
  display:flex; justify-content:space-between; align-items:center; gap: var(--space-md);
  padding: var(--space-sm) var(--space-lg);
  color: var(--text-secondary);
  border-bottom:1px solid var(--border-color);
}

/* ===== פאג'ינציה ===== */
.pagination-controls{ display:flex; align-items:center; gap: var(--space-sm); }
.pagination-info{ color: var(--text-secondary); min-width: 8ch; text-align:center; }

/* ===== טוסטים ===== */
.toast-container{
  position: fixed; top: var(--space-xl); left:50%; transform: translateX(-50%);
  display:flex; flex-direction:column; gap: var(--space-sm);
  z-index: 1500;
}
.toast{
  padding: .7rem 1rem; border-radius: var(--radius-md); color: #fff; font-weight:700;
  box-shadow: var(--shadow-md); opacity:0; transform: translateY(-8px);
  animation: slideIn .25s ease forwards;
}
.toast-info{ background:#334155; }
.toast-success{ background:#166534; }
.toast-warning{ background:#854d0e; }
.toast-error{ background:#7f1d1d; }
@keyframes slideIn{
  to{ opacity:1; transform: translateY(0); }
}

/* ===== שכבת טעינה ===== */
.loading-overlay{
  position: fixed; inset:0; background: rgba(0,0,0,.45);
  display: grid; place-items:center; opacity:0; pointer-events:none;
  transition: opacity var(--transition-fast) ease;
  z-index: 1200;
}
.loading-overlay.visible{ opacity:1; pointer-events:auto; }
.spinner{
  width: 48px; height: 48px; border-radius: 50%;
  border: 4px solid rgba(255,255,255,.2);
  border-top-color: #fff;
  animation: spin 1s linear infinite;
}
@keyframes spin{
  to { transform: rotate(360deg); }
}

/* ===== "חזור למעלה" ===== */
.back-to-top{
  position: fixed; inset-inline-end: var(--space-xl); inset-block-end: calc(var(--space-xl) + 56px);
  width: 48px; height: 48px; border-radius: 50%;
  background: var(--primary-500); color: #fff; border:none;
  display:grid; place-items:center; box-shadow: var(--shadow-sm);
  cursor: pointer; opacity:0; transform: translateY(10px);
  transition: all var(--transition-fast) ease;
  z-index: 1200;
}
.back-to-top.visible{ opacity:1; transform: translateY(0); }
.back-to-top:hover{ background: var(--primary-700); }

/* ===== תחתית ===== */
.footer-info{
  width: min(100%, var(--container-max));
  margin-inline: auto;
  margin-block: var(--space-xl);
  padding: var(--space-xl);
  background: var(--bg-primary);
  border:1px solid var(--border-color);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  overflow: hidden;
}

/* ===== כפתור שפה ===== */
.language-toggle{
  position: fixed;
  inset-inline-end: var(--space-lg);
  inset-block-start: var(--space-lg);
  background: var(--bg-elev);
  color: var(--text-secondary);
  border:1px solid var(--border-color);
  border-radius: 999px;
  padding: .35rem .6rem;
  display:flex; align-items:center; gap:.45rem;
  box-shadow: var(--shadow-sm);
  z-index: 1300;
}
.language-toggle[aria-pressed="true"]{
  background:#14233f; color:#fff;
}
.language-toggle:hover{ background:#1a2641; }

/* ===== רספונסיביות כללית ===== */
@media (max-width: 900px){
  .topbar-inner{ padding-inline: var(--space-lg); }
  .container{ padding-inline: var(--space-lg); }
  .page-hero{ padding-block: var(--space-lg); }
}
@media (max-width: 600px){
  .topbar-inner{ padding-inline: var(--space-md); }
  .container{ padding-inline: var(--space-md); }
  .btn{ padding: .55rem .75rem; }
  .card{ padding: var(--space-md); }
}

/* ===== דקורציה רקע ===== */
.decor{
  position: absolute; inset:0; pointer-events:none; z-index:-1;
  background: radial-gradient(28rem 18rem at 85% 10%, rgba(59,130,246,.08), transparent 60%),
              radial-gradient(22rem 14rem at 20% 20%, rgba(59,130,246,.06), transparent 55%);
}
.hero-section{
  position: relative; overflow: hidden;
  background: linear-gradient(135deg, rgba(59,130,246,.05), transparent);
  border-bottom: 1px solid var(--border-color);
}
.hero-section::after{
  content:""; position:absolute; inset:0;
  background: linear-gradient(180deg, rgba(255,255,255,.02), transparent);
}

/* ===== כותרת אתר ===== */
.site-header{
  text-align:center;
  margin-block: var(--space-xl);
}
.site-header h1{
  font-weight: 900; letter-spacing:.4px;
  background: linear-gradient(135deg, #fff, #9ec1ff);
  -webkit-background-clip:text; background-clip:text; color:transparent;
}
.site-header p{ color: var(--text-secondary); }

/* ===== קישורים משניים ===== */
.meta{
  display:flex; gap: var(--space-lg); flex-wrap:wrap;
  color: var(--text-secondary);
  font-size: .92rem;
}
.meta a{ color: inherit; }
.meta a:hover{ color:#cdd9ff; }

/* ===== בלוקים כלליים ===== */
.panel{
  background: var(--bg-primary);
  border:1px solid var(--border-color);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-sm);
  padding: var(--space-xl);
}

/* ===== רקע גרדיאנט לאזורים מסוימים ===== */
.section{
  position: relative;
  margin-block: var(--space-xl);
  background:
    radial-gradient(70rem 44rem at 120% -30%, rgba(59,130,246,.08), transparent 60%),
    radial-gradient(70rem 44rem at -30% 120%, rgba(59,130,246,.05), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.015), transparent 60%);
  border-top:1px solid var(--border-color);
  border-bottom:1px solid var(--border-color);
}

/* ===== קישורי רשתות ===== */
.social{
  display:flex; align-items:center; gap:.75rem; flex-wrap:wrap;
}
.social a{
  display:inline-flex; align-items:center; gap:.4rem;
  padding: .35rem .6rem; border-radius: 999px;
  background: #0e1528; color:#dbeafe;
  border:1px solid #1e2a44;
}
.social a:hover{ background:#14233f; }

/* ===== עוגנים ===== */
.anchor{
  display:inline-flex; align-items:center; gap:.4rem;
  color:#cbd5e1;
}
.anchor i{ font-size:.9em; color:#8da7ff; }

/* ===== Empty State בסיסי (למקרה חסר) ===== */
.empty{
  width: min(100%, var(--container-max));
  margin: var(--space-xl) auto;
  padding: var(--space-xl);
  background: var(--bg-primary);
  border:1px solid var(--border-color);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-xs);
  color: var(--text-secondary);
  text-align:center;
}

/* ====== סוף ה-CSS המקורי ====== */


/* ===== Compatibility layer: match index.html + script.js ===== */

/* Visibility helpers (HTML/JS use class="hidden") */
.hidden{ display:none !important; }

/* Screen-reader only utility */
.sr-only{
  position:absolute; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}
.sr-only:focus{
  position:fixed; inset-inline-start: var(--space-lg); inset-block-start: var(--space-lg);
  width:auto; height:auto; margin:0; clip:auto; padding: var(--space-sm) var(--space-md);
  background: var(--primary-500); color:#fff; border-radius: var(--radius-sm); z-index:1000;
}

/* Small utilities */
.relative{ position: relative; }
.mx-auto{ margin-inline:auto; }
.my-4{ margin-block: 1rem; }
.my-8{ margin-block: 2rem; }
.mt-2{ margin-top: .5rem; }
.mt-4{ margin-top: 1rem; }
.mb-8{ margin-bottom: 2rem; }
.text-center{ text-align:center; }

/* Content container alias (HTML uses .table-container) */
.table-container{ padding: var(--space-lg) var(--space-xl) var(--space-xl); }

/* Mobile filters toggle */
.mobile-filters-toggle,
#mobileFiltersToggle{
  display:none;
  margin: var(--space-lg);
  background: var(--bg-elev);
  border:1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: .55rem .8rem;
  box-shadow: var(--shadow-xs);
  align-items:center; gap:.5rem; cursor:pointer;
}
.mobile-filters-toggle i,
#mobileFiltersToggle i{ font-size: .95em; }

/* Filters grid: index.html structure = .filters-bar > .filters-row > .filter-item */
.filters-row{
  display:grid; gap: var(--space-md);
  grid-template-columns: repeat(12, 1fr);
  align-items:end;
}
.filter-item{ display:grid; gap: var(--space-xs); }
/* Make #filtersBar collapsible on mobile; opened when .open is present (toggled by JS) */
@media (max-width: 900px){
  .mobile-filters-toggle,#mobileFiltersToggle{ display:inline-flex; }
  #filtersBar{ display:none; }
  #filtersBar.open{ display:block; }
}
/* Column layout */
.filters-row .filter-item:nth-child(1){ grid-column: span 4; } /* search */
.filters-row .filter-item:nth-child(2){ grid-column: span 2; } /* location */
.filters-row .filter-item:nth-child(3){ grid-column: span 2; } /* org */
.filters-row .filter-item:nth-child(4){ grid-column: span 2; } /* rank */
#dateRangeGroup{ grid-column: span 6; }
.filter-actions{ display:flex; gap: var(--space-sm); justify-content:flex-end; align-items:center; grid-column: span 6; }
@media (max-width: 900px){
  .filters-row{ grid-template-columns: repeat(6,1fr); }
  .filters-row .filter-item:nth-child(1){ grid-column: span 6; }
  .filters-row .filter-item:nth-child(2),
  .filters-row .filter-item:nth-child(3),
  .filters-row .filter-item:nth-child(4){ grid-column: span 3; }
  #dateRangeGroup{ grid-column: span 6; }
  .filter-actions{ grid-column: span 6; }
}
@media (max-width: 600px){
  .filters-row{ grid-template-columns: repeat(4,1fr); }
  .filter-item, #dateRangeGroup, .filter-actions{ grid-column: span 4; }
}

/* Button variants used by the HTML */
.btn-outline{
  background: transparent;
  color: var(--text-primary);
  border:1px solid var(--border-color);
}
.btn-outline:hover{ background:#1e2230; }
.btn-light{
  background: var(--bg-elev);
  color: var(--text-primary);
  border:1px solid var(--border-color);
}
.btn-light:hover{ background:#1e2230; }
.btn-link{
  background: transparent;
  color: var(--primary-300);
  border:none; padding-inline: .25rem;
}
.btn-link:hover{ color:#9ec1ff; text-decoration: underline; }

/* Results counter + pagination (HTML classes) */
.results-counter{ color: var(--text-secondary); padding: 0 var(--space-xl) var(--space-md); }
.pagination{
  display:flex; justify-content:center; align-items:center; gap: var(--space-sm);
  padding: var(--space-md) var(--space-xl);
}
.page-info{ color: var(--text-secondary); min-width: 8ch; text-align:center; }

/* Cards: match the markup rendered by script.js */
.cards{
  display:grid; gap: var(--space-md);
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  margin-block: var(--space-md);
}
.card{ margin:0; } /* ensure no extra margins inside .cards grid */
.card__title{
  display:flex; justify-content:space-between; align-items:baseline;
  margin:0 0 var(--space-sm) 0; font-size: 1.1rem;
}
.card__title small{ color: var(--muted); font-weight:600; }
.card__list{
  list-style:none; padding:0; margin:0;
  display:grid; gap: .35rem;
}
.card__list li b{ color: var(--muted); font-weight:600; }

/* Table sort indicators (script.js toggles th.sort-asc / th.sort-desc) */
.data-table thead th.sort-asc::after{ content: " ▲"; opacity:.7; font-size:.85em; }
.data-table thead th.sort-desc::after{ content: " ▼"; opacity:.7; font-size:.85em; }

/* Toasts: support BEM-style modifiers from JS ("toast--success", etc.) */
.toast--info{ background:#334155; }
.toast--success{ background:#166534; }
.toast--warning{ background:#854d0e; }
.toast--error{ background:#7f1d1d; }

/* Loading overlay: visible by default; JS hides/shows via .hidden */
.loading-overlay{ opacity:1; pointer-events:auto; }

/* Back-to-top: visible by default (JS does not toggle a .visible class) */
.back-to-top{ opacity:1; transform: none; }
.back-to-top.hidden{ opacity:0; transform: translateY(10px); pointer-events:none; }

/* Empty state */
.empty-state{
  width: min(100%, var(--container-max));
  margin: var(--space-xl) auto;
  padding: var(--space-xl);
  background: var(--bg-primary);
  border:1px solid var(--border-color);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-xs);
  color: var(--text-secondary);
  text-align:center;
}

/* Statistics section */
.stats-grid{
  display:grid; gap: var(--space-md);
  grid-template-columns: repeat(4, minmax(0,1fr));
  padding: var(--space-lg) var(--space-xl);
}
.stat-card{
  background: var(--bg-elev);
  border:1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: var(--space-lg);
  text-align:center;
  box-shadow: var(--shadow-xs);
}
.stat-card h3{ color: var(--muted); font-size: .95rem; margin:0 0 .35rem 0; }
.stat-card p{ font-size: 1.15rem; font-weight: 800; margin:0; }
@media (max-width: 900px){
  .stats-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}
@media (max-width: 600px){
  .stats-grid{ grid-template-columns: 1fr; }
}

/* Aliases to support legacy class names in existing CSS */
.filter-group{ display:grid; gap: var(--space-xs); } /* ensure older CSS keeps working */
.pagination-controls{ display:flex; align-items:center; gap: var(--space-sm); } /* legacy */
.pagination-info{ color: var(--text-secondary); min-width: 8ch; text-align:center; } /* legacy */

/* === BiDi (RTL/LTR) – בידוד טקסטים מעורבים === */
.data-table th,
.data-table td,
.card__title,
.card__list { unicode-bidi: isolate; }

.bidi-auto { direction: auto; unicode-bidi: isolate; }
.bidi-rtl  { direction: rtl;  unicode-bidi: isolate; }
.bidi-ltr  { direction: ltr;  unicode-bidi: isolate; text-align: left; }

.data-table td.center { text-align: center; }

/* אופציונלי: עוזר במסכים צרים */
.table-container { overflow-x: auto; }
.data-table { min-width: 960px; } /* הורידו אם לא צריך גלילה אופקית */

