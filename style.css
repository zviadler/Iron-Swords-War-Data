/* ==================================================================
   Project: Iron Swords War Data — style.css (clean, consolidated)
   Date: 2025-09-09
   Notes:
   - Deduplicated overlapping blocks (results-toolbar / columns popover).
   - Fixed minor rgba typos; kept existing visual design.
   - Matches current HTML structure (filters-grid, fi--*), RTL-friendly.
   ================================================================== */

/* -----------------------------
   1) CSS Variables (Design Tokens)
   ----------------------------- */
:root {
  /* Colors */
  --primary-500: #2563eb;
  --primary-600: #1e40af;
  --accent: #f59e0b;
  --success: #16a34a;
  --danger: #dc2626;

  --bg: #0b0f17;
  --bg-elev: #111827;
  --panel: #0f172a;
  --border-color: #1f2937;
  --muted: #6b7280;

  --text: #e5e7eb;
  --text-secondary: #9ca3af;
  --link: #93c5fd;

  /* Spacing */
  --space-2xs: .25rem;
  --space-xs: .5rem;
  --space-sm: .75rem;
  --space-md: 1rem;
  --space-lg: 1.25rem;
  --space-xl: 1.75rem;
  --space-2xl: 2.25rem;

  /* Radius + Shadow + Motion */
  --container-max: 1400px;
  --radius-sm: .375rem;
  --radius-md: .5rem;
  --radius-lg: .75rem;

  --font-sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans", "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --font-size-xs: .75rem;
  --font-size-sm: .875rem;
  --font-size-md: 1rem;
  --font-size-lg: 1.125rem;

  --shadow-xs: 0 1px 2px rgba(0,0,0,.25);
  --shadow-sm: 0 2px 8px rgba(0,0,0,.25);

  --transition-fast: 150ms;
  --transition-med: 250ms;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  :root { --transition-fast: 0ms; --transition-med: 0ms; }
  * { animation: none !important; transition: none !important; }
}

/* -----------------------------
   2) Base / Reset
   ----------------------------- */
*,
*::before,
*::after { box-sizing: border-box; }

html { color-scheme: dark; hanging-punctuation: first allow-end last; }
html, body { height: 100%; }

body {
  margin: 0;
  font-family: var(--font-sans);
  font-size: var(--font-size-md);
  line-height: 1.6;
  background:
    radial-gradient(1200px 1200px at 90% -10%, rgba(37,99,235,.12), transparent 70%),
    radial-gradient(1200px 1200px at -10% 10%, rgba(15,23,42,.3), transparent 60%),
    var(--bg);
  color: var(--text);
  text-wrap: balance;
}

img, svg, video { max-inline-size: 100%; block-size: auto; display: block; }

a { color: var(--link); text-decoration: none; }
a:hover { text-decoration: underline; }

code, pre, kbd, samp { font-family: var(--font-mono); }
pre { background: var(--panel); padding: var(--space-md); border-radius: var(--radius-md); overflow: auto; }

/* Screen-reader only + escape on focus */
.sr-only {
  position: absolute !important;
  inline-size: 1px; block-size: 1px;
  padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0);
  white-space: nowrap; border: 0;
}
.sr-only:focus, .sr-only:active {
  position: static !important;
  inline-size: auto; block-size: auto;
  margin: 0; padding: var(--space-sm) var(--space-md);
  clip: auto; overflow: visible; white-space: normal;
  background: var(--primary-500); color: #fff; border-radius: var(--radius-sm);
}

/* Focus */
:where(a, button, [role="button"], input, select, textarea):focus-visible {
  /* Fallbacks קודם */
  outline: 2px solid #2563eb;
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(37,99,235,.25);

  /* ואז המתקדמים (בדפדפנים שתומכים) */
  outline: 2px solid color-mix(in oklab, var(--primary-500) 70%, white 0%);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px color-mix(in oklab, var(--primary-500) 25%, transparent);
}

/* Selection */
::selection { background: color-mix(in oklab, var(--primary-500) 40%, black); color: #fff; }

/* -----------------------------
   3) Minimal Utility Classes (for leftover Tailwind-like HTML)
   ----------------------------- */
.relative { position: relative !important; }
.mx-auto { margin-inline: auto !important; }
.my-4 { margin-block: 1rem !important; }
.my-8 { margin-block: 2rem !important; }
.mt-2 { margin-block-start: .5rem !important; }
.mt-4 { margin-block-start: 1rem !important; }
.mb-8 { margin-block-end: 2rem !important; }
.text-center { text-align: center !important; }

.bg-primary-500 { background: var(--primary-500) !important; }
.text-white { color: #fff !important; }
.px-4 { padding-inline: var(--space-xl) !important; }
.py-2 { padding-block: var(--space-sm) !important; }
.rounded-md { border-radius: var(--radius-md) !important; }
.z-50 { z-index: 50 !important; }

/* -----------------------------
   4) Layout
   ----------------------------- */
.container {
  inline-size: min(100%, var(--container-max));
  margin-inline: auto;
  padding-inline: var(--space-lg);
}
.wrapper { padding-block: var(--space-xl); }

@media (max-width: 900px) { .container { padding-inline: var(--space-md); } }
@media (max-width: 600px) { .container { padding-inline: var(--space-sm); } }

/* Cards grid container (for JS-rendered cards) */
/* Cards grid (fluid) */
.cards{
  display:grid;
  gap:var(--space-lg);
  grid-template-columns:repeat(auto-fit, minmax(300px,1fr));
  align-items:stretch; /* כל כרטיס באותו גובה שורה */
}
@media (max-width:700px){
  .cards{ gap:var(--space-md); }
}

@media (max-width:500px){
  .card{ padding:var(--space-md); }
  .card p{ line-clamp:2; }
}

/* Simple header */
.site-header h1 { margin: 0; }
.site-header p { margin: .25rem 0 0 0; color: var(--text-secondary); }

/* -----------------------------
   5) Header / Toolbar / Filters
   ----------------------------- */
.toolbar {
  display: flex; align-items: center; justify-content: space-between;
  gap: var(--space-md);
  padding-block: var(--space-md);
}

/* Accept any of: .filters-bar, .filtersBar class, or #filtersBar id */
.filters-bar,
.filtersBar,
#filtersBar {
  display: flex; flex-wrap: wrap; align-items: center;
  gap: var(--space-sm);
  background: var(--panel);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--space-sm);
}

/* ====== Filters grid ====== */
.filters-grid{
  display:grid;
  grid-template-columns:repeat(12,minmax(0,1fr));
  gap:var(--space-sm);
  align-items:end;
}
.fi{ min-inline-size:0; }

.fi--search{   grid-column: span 4; }
.fi--location{ grid-column: span 2; }
.fi--org{      grid-column: span 2; }
.fi--rank{     grid-column: span 2; }

.fi--dates{    grid-column: span 4; }
.fi--actions{
  grid-column: span 4;
  display:flex; gap:var(--space-sm); align-items:end; flex-wrap:wrap;
}

/* Date range group */
#dateRangeGroup {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: var(--space-xs);
}
.date-range {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  flex-wrap: wrap;
}
.date-range-group {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}
.date-range-inputs {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  flex-wrap: wrap;
}
.date-range input[type="date"]{ inline-size:18ch; }
.date-sep { color: var(--text-secondary); margin-inline: var(--space-xs); }
.loading-text { margin-inline-start: var(--space-sm); font-size: var(--font-size-sm); color: var(--text-secondary); }

/* Responsive for filters grid */
@media (max-width:1100px){
  .fi--search{ grid-column: span 12; }
  .fi--location, .fi--org, .fi--rank{ grid-column: span 6; }
  .fi--dates{  grid-column: span 8; }
  .fi--actions{grid-column: span 4; }
}
@media (max-width:800px){
  .fi--location, .fi--org, .fi--rank,
  .fi--dates, .fi--actions{ grid-column: span 12; }
}

/* Footer actions row under filters (if present) */
.footer-actions {
  display: flex; align-items: center; justify-content: space-between;
  gap: var(--space-sm);
  padding-block: var(--space-sm);
}

/* -----------------------------
   6) Form Controls
   ----------------------------- */
:where(input[type="text"], input[type="search"], input[type="number"], input[type="date"], select, textarea) {
  appearance: none;
  inline-size: 100%;
  padding: .6rem .75rem;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  background: #0b1220;
  color: var(--text);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.03);
}
:where(input, select, textarea)::placeholder { color: var(--text-secondary); }

.input-icon { position: relative; }
.input-icon > svg,
.input-icon > i {
  position: absolute; inset-inline-start: .6rem; inset-block-start: 50%;
  transform: translateY(-50%); pointer-events: none;
}
.input-icon > input { padding-inline-start: 2rem; }

label { font-size: var(--font-size-sm); color: var(--text-secondary); }

/* -----------------------------
   7) Buttons
   ----------------------------- */
.btn {
  display: inline-flex; align-items: center; justify-content: center; gap: .5rem;
  padding: .6rem .9rem;
  background: var(--primary-500);
  color: #fff;
  border: 1px solid transparent;
  border-radius: var(--radius-md);
  cursor: pointer;
  box-shadow: var(--shadow-xs);
  transition: transform .05s ease, background var(--transition-fast) ease, border-color var(--transition-fast) ease;
  white-space: nowrap;
}
.btn:hover { background: var(--primary-600); }
.btn:active { transform: translateY(1px); }
.btn[disabled], .btn:disabled { opacity: .6; cursor: not-allowed; }

.btn--secondary,
.btn-secondary { background: #374151; color: #fff; }
.btn--ghost,
.btn-outline { background: transparent; color: var(--text); border-color: var(--border-color); }
.btn-link { background: transparent; border: 0; color: var(--link); padding: 0; }
.btn-light { background: #1f2937; color: var(--text); border-color: var(--border-color); }
.btn--danger { background: var(--danger); color: #fff; }
.btn--success { background: var(--success); color: #fff; }
.btn--sm { padding: .45rem .65rem; font-size: var(--font-size-sm); border-radius: var(--radius-sm); }
.btn--lg { padding: .8rem 1.1rem; font-size: var(--font-size-lg); border-radius: var(--radius-lg); }

/* -----------------------------
   8) Cards / Panels
   ----------------------------- */
/* כרטיס כעמודה גמישה */
.card{
  display:flex; flex-direction:column; height:100%;
  background:color-mix(in oklab, var(--panel) 85%, transparent);
  border:1px solid color-mix(in srgb, rgba(148,163,184,.14) 80%, var(--border-color));
  border-radius:var(--radius-lg);
  padding:var(--space-lg);
  box-shadow:0 8px 24px rgba(8,12,22,.25);
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.card:hover{
  transform:translateY(-4px);
  box-shadow:0 16px 36px rgba(8,12,22,.32);
  border-color:color-mix(in srgb, var(--org-color, rgba(99,102,241,.35)) 40%, rgba(148,163,184,.45));
}

/* כותרת: שם עם אליפסיס + badge */
.card__title{
  margin:0 0 .35rem 0;
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:.35rem;
}
.card__title strong{
  flex:1 1 auto;
  min-width:0;
  white-space:normal;
  overflow:visible;
  text-overflow:clip;
}
.card__title .badge{ flex:none; }

/* פרטי ארגון כולל לוגו */
.card__org{
  --org-color-fallback: var(--org-color, #1f2937);
  display:flex;
  align-items:center;
  gap:.45rem;
  margin-top:.25rem;
  padding:.15rem 0;
  border-radius:var(--radius-md);
}
.card__org-logo{
  inline-size:1.8rem;
  block-size:1.8rem;
  border-radius:999px;
  border:1px solid color-mix(in srgb, var(--org-color-fallback) 45%, rgba(148,163,184,.25));
  background:#050a16;
  display:grid;
  place-items:center;
  overflow:hidden;
  position:relative;
}
.card__org-logo img{
  inline-size:100%;
  block-size:100%;
  object-fit:contain;
  filter:drop-shadow(0 4px 6px rgba(2,6,23,.35));
}
.card__org-logo img[data-failed='1']{ display:none; }
.card__org-logo img + .card__org-initials{ display:none; }
.card__org-logo img[data-failed='1'] + .card__org-initials{ display:inline-flex; }
.card__org-initials{
  font-weight:600;
  font-size:var(--font-size-xs);
  letter-spacing:.06em;
  color:color-mix(in srgb, var(--org-color-fallback) 60%, #f1f5f9);
}
.card__org-text{
  display:flex;
  flex-direction:column;
  gap:.05rem;
}
.card__org-name{ font-weight:600; color:var(--text); font-size:var(--font-size-sm); }
.card__org-alias{ font-size:var(--font-size-2xs, .7rem); color:color-mix(in srgb, var(--text-secondary) 80%, #cbd5f5); }
@media (max-width:500px){
  .card__org{ padding:var(--space-xs) 0; gap:.35rem; }
  .card__org-logo{ inline-size:1.6rem; block-size:1.6rem; }
}

/* תיאור – עד 3 שורות */
.card p{
  margin:.5rem 0 0; color:var(--text-secondary);
  display:-webkit-box; line-clamp:3; -webkit-box-orient:vertical; overflow:hidden;
}

/* אייקוני מידע נוסף בכרטיס */
.card__meta-grid{
  margin-top:var(--space-sm);
  display:flex;
  flex-direction:column;
  gap:.35rem;
}
.card__meta-item{
  display:flex;
  align-items:flex-start;
  gap:.3rem;
  padding:0;
  position:relative;
  padding-inline-start:1.6rem;
}
.card__meta-item i{
  position:absolute;
  inset-inline-start:0;
  font-size:.85rem;
  line-height:1;
  color:color-mix(in srgb, var(--org-color, var(--primary-500)) 45%, #a5b4fc);
  margin-top:.1rem;
  opacity:.75;
}
.card__meta-item::before{
  content:"";
  position:absolute;
  inset-inline-start:1.05rem;
  inset-block:.15rem;
  inline-size:1px;
  background:color-mix(in srgb, rgba(148,163,184,.25) 70%, transparent);
}
.card__meta-value{
  font-size:var(--font-size-sm);
  color:var(--text);
  word-break:break-word;
}
.card__meta-value mark{ background:color-mix(in srgb,var(--primary-500) 15%, rgba(37,99,235,.05)); }

/* פוטר – תמיד בתחתית הכרטיס (במקום dashed) */
.card__footer{
  margin-top:auto;
  padding-top:var(--space-md);
  border-top:1px solid rgba(148,163,184,.16);
  display:flex;
  gap:var(--space-md);
  flex-wrap:wrap;
  align-items:center;
}
.card__footer .meta{
  display:inline-flex;
  align-items:center;
  gap:.4rem;
  font-size:var(--font-size-xs);
  color:color-mix(in srgb, var(--text-secondary) 85%, #cbd5f5);
}
.card__footer .meta i{ color:color-mix(in srgb, var(--org-color, var(--primary-500)) 40%, #94a3b8); }
.card__footer .meta .num{ font-variant-numeric:tabular-nums; }

/* הדגשת חיפוש רכה */
mark{ background:color-mix(in oklab,var(--primary-500) 35%, transparent); border-radius:.25rem; padding:0 .15em; }

/* -----------------------------
   9) Tables / Data
   ----------------------------- */
.table-container {
  padding: var(--space-lg) var(--space-xl) var(--space-xl);
  overflow-x: auto;
  background: var(--panel);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
}
.table-container.is-empty {
  padding: 0;
  background: transparent;
  border: none;
}
.data-table {
  inline-size: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: var(--font-size-sm);
}
.data-table thead th {
  position: sticky; inset-block-start: 0;
  background: #0f1a2c;
  color: var(--text);
  text-align: start;
  padding: .7rem .75rem;
  border-bottom: 1px solid var(--border-color);
  z-index: 5; /* keep above rows but below popovers */
  cursor: pointer;
}
.data-table tbody td {
  padding: .6rem .75rem;
  border-bottom: 1px solid var(--border-color);
  vertical-align: top;
}
.data-table tbody tr:hover { background: rgba(255,255,255,.03); }

.text-end { text-align: end; }
.text-start { text-align: start; }

/* -----------------------------
   10) Pagination & Back-to-top
   ----------------------------- */
.pagination {
  display: flex; align-items: center; justify-content: center; gap: var(--space-xs);
  margin-block: var(--space-lg);
}
.pagination .page {
  display: inline-flex; align-items: center; justify-content: center;
  min-inline-size: 2.25rem; min-block-size: 2.25rem;
  padding: 0 .5rem;
  border-radius: var(--radius-md);
  background: #0f1a2c;
  border: 1px solid var(--border-color);
  cursor: pointer;
}
.pagination .page[aria-current="page"] { background: var(--primary-500); color: #fff; }

.back-to-top {
  position: fixed; inset-inline-end: var(--space-lg); inset-block-end: var(--space-lg);
  display: inline-flex; align-items: center; justify-content: center;
  inline-size: 3rem; block-size: 3rem;
  background: var(--primary-500); color: #fff;
  border-radius: 50%;
  border: none; box-shadow: var(--shadow-sm);
  cursor: pointer;
  opacity: 0; visibility: hidden; transform: translateY(10px);
  transition: opacity var(--transition-med), transform var(--transition-med), visibility var(--transition-med);
  z-index: 1000;
}
.back-to-top.is-visible { opacity: 1; visibility: visible; transform: translateY(0); }

/* -----------------------------
   11) Loading / Empty & Toasts
   ----------------------------- */
.loading-overlay {
  position: fixed; inset: 0;
  display: grid; place-items: center;
  background: rgba(8, 11, 18, .76);
  backdrop-filter: blur(2px);
  z-index: 999;
}
.spinner {
  inline-size: 3rem; block-size: 3rem;
  border-radius: 50%;
  border: 3px solid rgba(255,255,255,.15);
  border-block-start-color: var(--primary-500);
  animation: spin 1s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

.empty { text-align: center; color: var(--text-secondary); padding: var(--space-xl) 0; }
.empty-state {
  text-align: center;
  color: var(--text-secondary);
  padding: var(--space-xl) var(--space-lg);
  border: 1px dashed var(--border-color);
  border-radius: var(--radius-lg);
  background: rgba(15, 23, 42, .35);
  display: grid;
  gap: var(--space-sm);
  justify-items: center;
  margin-block: var(--space-lg);
}
.empty-state p {
  margin: 0;
}
.empty-state i {
  font-size: 2.4rem;
  color: var(--muted);
}
.empty-state__hint {
  margin: 0;
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
}
.empty-state .btn {
  margin-block-start: var(--space-xs);
}

.error-state {
  display: none;
  text-align: center;
  gap: var(--space-sm);
  padding: var(--space-xl) var(--space-lg);
  border: 1px solid color-mix(in oklab, var(--danger) 35%, transparent);
  border-radius: var(--radius-lg);
  background: rgba(127, 29, 29, .15);
  color: var(--text);
  margin-block: var(--space-lg);
}
.error-state.hidden { display: none; }
.error-state:not(.hidden) {
  display: grid;
  justify-items: center;
}
.error-state i {
  font-size: 2.2rem;
  color: color-mix(in oklab, var(--danger) 70%, white 15%);
}
.error-state__title {
  margin: 0;
  font-weight: 600;
  font-size: var(--font-size-lg);
}
.error-state__msg {
  margin: 0;
  color: var(--text-secondary);
}
.error-state__actions {
  display: flex;
  gap: var(--space-sm);
}

.toast-container {
  position: fixed; inset-inline-end: 1rem; inset-block-end: 1rem;
  display: grid; gap: .5rem; z-index: 1100;
}
.toast {
  background: #1f2937; color: var(--text);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: .6rem .8rem; box-shadow: var(--shadow-sm);
}

/* -----------------------------
   12) Stats
   ----------------------------- */
.stats-grid { display: grid; gap: var(--space-lg); grid-template-columns: repeat(4, minmax(0,1fr)); }
@media (max-width: 1100px) { .stats-grid { grid-template-columns: repeat(2, minmax(0,1fr)); } }
@media (max-width: 600px)  { .stats-grid { grid-template-columns: 1fr; } }
.stat-card {
  background: var(--bg-elev);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  text-align: center;
}
.stat-card h3 { margin: 0 0 .25rem 0; font-size: 1rem; color: var(--text-secondary); }
.stat-card p  { margin: 0; font-size: 1.25rem; font-weight: 600; }

/* -----------------------------
   13) Helpers
   ----------------------------- */
.hidden { display: none !important; }
.muted { color: var(--text-secondary) !important; }
.nowrap { white-space: nowrap !important; }

.mt-sm { margin-block-start: var(--space-sm) !important; }
.mt-md { margin-block-start: var(--space-md) !important; }
.mt-lg { margin-block-start: var(--space-lg) !important; }
.mb-sm { margin-block-end: var(--space-sm) !important; }
.mb-md { margin-block-end: var(--space-md) !important; }
.mb-lg { margin-block-end: var(--space-lg) !important; }

.w-100 { inline-size: 100% !important; }

/* Badges */
.badge {
  display: inline-flex; align-items: center; gap: .35rem;
  padding: .2rem .55rem;
  border-radius: 999px;
  border: 0;
  background: color-mix(in srgb, var(--org-color, rgba(79,70,229,.55)) 35%, rgba(15,23,42,.7));
  font-size: var(--font-size-xs);
  font-weight:600;
  color: color-mix(in srgb, #f8fafc 80%, var(--org-color, #f8fafc));
}
.badge--success { background: color-mix(in oklab, var(--success) 20%, #0f1a2c); color: #e7f6eb; }
.badge--danger  { background: color-mix(in oklab, var(--danger) 20%, #0f1a2c); color: #fde1e1; }

/* -----------------------------
   14) Misc
   ----------------------------- */
.lang-btn-row {
  display: flex;
  justify-content: flex-start;
  flex-wrap: wrap;
  gap: var(--space-sm);
  margin-block-end: var(--space-md);
  inline-size: 100%;
}
.lang-btn-row .language-toggle {
  margin-inline-start: auto;
}
html[dir="ltr"] .lang-btn-row {
  justify-content: flex-end;
}
html[dir="ltr"] .lang-btn-row .language-toggle {
  margin-inline-start: 0;
  margin-inline-end: auto;
}

.language-toggle {
  display: inline-flex; align-items: center; gap: .4rem;
  background: #1f2937; color: var(--text); border: 1px solid var(--border-color);
  padding: .35rem .75rem; border-radius: var(--radius-md);
  cursor: pointer; box-shadow: var(--shadow-sm);
}
.language-toggle i { font-size: .95rem; color: var(--text-secondary); }
.language-toggle .lang-text { font-weight: 600; }
.mobile-filters-toggle-wrap {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: var(--space-sm);
  margin-block: var(--space-sm);
}
.mobile-filters-toggle-wrap .language-toggle {
  flex-shrink: 0;
}
.mobile-filters-toggle {
  display: flex; align-items: center; gap: .5rem;
  background: #1f2937; color: var(--text);
  border: 1px solid var(--border-color); border-radius: var(--radius-md);
  padding: .5rem .75rem; cursor: pointer;
  inline-size: fit-content;
}
.mobile-filters-toggle__chevron { transition: transform var(--transition-fast) ease; }
.mobile-filters-toggle.is-open .mobile-filters-toggle__chevron { transform: rotate(180deg); }
.results-counter { color: var(--text-secondary); }
.page-info { color: var(--text-secondary); }

@media (max-width: 768px) {
  .lang-btn-row { display: none; }
  .mobile-filters-toggle-wrap {
    justify-content: space-between;
    flex-wrap: wrap;
  }
  html[dir="rtl"] .mobile-filters-toggle-wrap,
  html[dir="ltr"] .mobile-filters-toggle-wrap {
    justify-content: space-between;
  }
  .mobile-filters-toggle-wrap .language-toggle {
    order: -1;
  }
  html[dir="ltr"] .mobile-filters-toggle-wrap .language-toggle {
    order: 1;
  }
  html[dir="ltr"] .mobile-filters-toggle {
    order: 0;
  }
  .language-toggle--mobile {
    box-shadow: none;
    padding-block: .3rem;
  }
}

/* -----------------------------
   15) Results Toolbar (top bar)
   ----------------------------- */
.results-toolbar{
  display:flex; align-items:center; justify-content:space-between;
  gap: var(--space-sm);
  margin-block: var(--space-md);
  padding: var(--space-sm) var(--space-md);
  background: var(--panel);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  position: relative;
  z-index: 20; /* above table header */
}
.results-toolbar .rt-left,
.results-toolbar .rt-right{
  display:flex; align-items:center; gap:.6rem; min-width:0;
}
.results-toolbar .rt-right{ flex-wrap: wrap; }
.results-toolbar .results-counter{ font-weight:600; }
.page-size-control {
  display: inline-flex;
  align-items: center;
  gap: .4rem;
  background: linear-gradient(180deg,#162036 0%,#101828 100%);
  border: 1px solid rgba(148, 163, 184, 0.25);
  border-radius: var(--radius-md);
  padding: .35rem .6rem;
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
  position: relative;
  transition: border-color var(--transition-fast) ease, box-shadow var(--transition-fast) ease;
}
.page-size-control .page-size-label {
  font-weight: 600;
  white-space: nowrap;
}
.page-size-control::after {
  content: '\f107';
  font-family: 'Font Awesome 6 Free';
  font-weight: 900;
  font-size: .75rem;
  color: var(--text-secondary);
  pointer-events: none;
  position: absolute;
  inset-inline-end: .55rem;
}
.page-size-control .page-size-select {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background: #0f172a;
  background-image: none;
  border: 1px solid rgba(148, 163, 184, 0.25);
  border-radius: var(--radius-sm);
  color: var(--text);
  font-size: var(--font-size-sm);
  font-weight: 600;
  padding: .25rem 1.6rem .25rem .5rem;
  min-inline-size: 5.5ch;
  text-align: center;
  cursor: pointer;
}
.page-size-control:hover,
.page-size-control:focus-within {
  border-color: rgba(37,99,235,0.4);
  box-shadow: 0 0 0 2px rgba(37,99,235,0.2);
}
.page-size-control .page-size-select:focus {
  outline: none;
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(37,99,235,.3);
}
html[dir="ltr"] .page-size-control::after {
  inset-inline-end: .55rem;
}
html[dir="rtl"] .page-size-control .page-size-select {
  padding-inline: .5rem 1.6rem;
}

@media (max-width: 700px){
  .results-toolbar{ flex-direction:column; align-items:stretch; }
  .results-toolbar .rt-right{ justify-content:space-between; }
}
@media (max-width: 768px){
  .results-toolbar{ flex-wrap: wrap; gap: .5rem .6rem; }
  .results-toolbar .rt-left,
  .results-toolbar .rt-right{ flex: 1 1 100%; }
  .results-toolbar .rt-right{ justify-content: flex-start; }
}

/* -----------------------------
   16) Columns picker (table view)
   ----------------------------- */
.columns-btn { margin-inline-start: .4rem; }

.columns-pop{
  position: fixed; /* viewport anchored for correct placement */
  display: none;
  min-inline-size: 230px;
  max-width: min(92vw, 420px);
  padding: .6rem;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  background: var(--panel);
  box-shadow: var(--shadow-sm);
  z-index: 10050; /* above table header */
}
.columns-pop.is-open { display: block; }
.columns-pop header { font-size: .9rem; color: var(--text-secondary); margin-bottom: .4rem; }
.columns-pop .cols-grid { display: grid; grid-template-columns: 1fr 1fr; gap: .35rem .75rem; }
.columns-pop label { display: inline-flex; align-items: center; gap: .4rem; cursor: pointer; }
.columns-pop .actions { display: flex; gap: .4rem; margin-top: .5rem; justify-content: space-between; }

/* Backdrop (mobile) */
.columns-backdrop{
  position: fixed; inset: 0;
  background: rgba(0,0,0,.35);
  z-index: 10040;
  display: none;
}
.columns-backdrop.is-open{ display:block; }

/* Bottom-sheet style on mobile */
@media (max-width:768px){
  .columns-pop.is-mobile{
    left:12px !important; right:12px !important;
    top:auto !important; bottom:max(12px, env(safe-area-inset-bottom));
    width:auto !important; max-height:70vh; overflow:auto; border-radius:12px;
  }
}

/* -----------------------------
   17) Footer tweaks / filter sheet overrides
   ----------------------------- */
.footer-info{
  margin-block-start: var(--space-2xl);
  padding-block-start: var(--space-lg);
  border-top: 1px solid var(--border-color);
  color: var(--text-secondary);
}
.footer-info p{ margin: .25rem 0; }
/* export button moved to results-toolbar */
.footer-info .footer-actions{ display: none; }

/* Optional bottom sheet container id created by JS */
#filterSheet #filtersBar {
  display: grid !important;
  grid-template-columns: 1fr;
  gap: var(--space-sm);
  justify-items: start;
}
#filterSheet #filtersBar .filters-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-sm);
}
#filterSheet #filtersBar select,
#filterSheet #filtersBar input,
#filterSheet #filtersBar button {
  width: 100%;
  max-width: 100%;
}

/* -----------------------------
   18) Mobile filters toggle visibility
   ----------------------------- */
#mobileFiltersToggle { display: none; }
@media (max-width: 768px) { #mobileFiltersToggle { display: block; } }

/* -----------------------------
   19) Print
   ----------------------------- */
@media print {
  .back-to-top, .loading-overlay { display: none !important; }
  .btn { background: #333 !important; color: #fff !important; }
  .table-container { box-shadow: none; border: 1px solid #999; }
}

.columns-pop{ position:fixed; z-index:1102; }
.columns-backdrop{ position:fixed; z-index:1101; }
.columns-pop.is-mobile{
  left:0; right:0; bottom:0; max-height:88vh; border-radius:12px 12px 0 0;
}


/* הדגשת חיפוש (אם יש) */
mark{ background:color-mix(in oklab,var(--primary-500) 35%, transparent); border-radius:.25rem; padding:0 .15em; }

/* כשעמוד RTL – התוכן בכרטיסים יוצג LTR כדי להיראות כמו באנגלית */
html[dir="rtl"] .card,
html[dir="rtl"] .card *{
  direction:ltr;
  text-align:left;
}
/* --- Footer styling (simple, clean) --- */
.footer-info {
  background: var(--bg-elev);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
}
.footer-info p {
  margin: 0 0 .5rem 0;
  color: var(--text-secondary);
}
.footer-info p:first-child {
  color: var(--text-primary);
  font-weight: 600;
}
.footer-actions {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: .5rem;
  margin-top: .5rem;
}
/* Stack the Date Range label above the inputs */
#dateRangeGroup{
  flex-direction: column;       /* תווית מעל השדות */
  align-items: stretch;         /* השדות יתפסו את הרוחב הפנוי */
  gap: var(--space-2xs);
}
