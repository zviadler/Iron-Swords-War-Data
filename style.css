/* ===== משתנים ועקרונות ===== */
:root{
  --space-xs: .25rem;
  --space-sm: .5rem;
  --space-md: .75rem;
  --space-lg: 1rem;
  --space-xl: 1.5rem;
  --space-2xl: 2.25rem;

  --radius-sm: .25rem;
  --radius-md: .5rem;
  --radius-lg: .75rem;
  --radius-xl: 1rem;

  --font-size-xs: .8rem;
  --font-size-sm: .95rem;
  --font-size-md: 1rem;
  --font-size-lg: 1.25rem;

  --bg-page: #0b0c10;
  --bg-primary: #12131a;
  --bg-elev: #171923;

  --text-primary: #f1f5f9;
  --text-secondary: #cbd5e1;
  --muted: #94a3b8;

  --primary-300: #60a5fa;
  --primary-500: #3b82f6;
  --primary-700: #1d4ed8;

  --border-color: #2a2f3a;
  --border-focus: #3b82f6;

  --shadow-xs: 0 1px 2px rgba(0,0,0,.15);
  --shadow-sm: 0 2px 8px rgba(0,0,0,.2);
  --shadow-md: 0 6px 18px rgba(0,0,0,.28);

  --container-max: 1200px;
  --transition-fast: .15s;
  --transition-slow: .3s;
}

*{ box-sizing: border-box; }
html, body{ height:100%; }
body{
  margin:0;
  background: linear-gradient(135deg, #0f1220, #0c0f1a);
  color: var(--text-primary);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  line-height: 1.55;
}
[hidden]{ display:none !important; }

.skip-link{
  position:absolute; inset-inline-start: var(--space-lg); inset-block-start: var(--space-lg);
  background: var(--primary-500); color: white; padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-sm); transform: translateY(-150%); z-index: 1000;
}
.skip-link:focus{ transform: translateY(0); }

.container{
  width: min(100%, var(--container-max));
  margin-inline: auto;
  margin-block: var(--space-xl);
  background: var(--bg-primary);
  border:1px solid var(--border-color);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  overflow: hidden;
}

/* ===== כפתור שפה ===== */
.language-toggle{
  position: fixed;
  inset-inline-end: var(--space-lg);
  inset-block-start: var(--space-lg);
  background: var(--bg-elev);
  color: var(--text-secondary);
  border:1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: var(--space-sm) var(--space-md);
  font-weight: 700;
  cursor: pointer;
  box-shadow: var(--shadow-xs);
  z-index: 1000;
}
.language-toggle:hover{ color: var(--text-primary); border-color: var(--primary-300); box-shadow: var(--shadow-sm); }

/* ===== כותרת ===== */
.site-header{
  text-align:center;
  padding: var(--space-2xl) var(--space-xl) var(--space-xl);
  background: radial-gradient(1000px 300px at 50% 0%, rgba(59,130,246,.25), transparent), linear-gradient(180deg,#0f1320,#0c0f1a 60%);
  border-bottom:1px solid var(--border-color);
}
.site-header h1{ margin:0; font-size: clamp(1.25rem, 2.4vw, 1.8rem); }
.site-header p{ margin:.5rem 0 0; color: var(--text-secondary); }

/* ===== סטטיסטיקות ===== */
.stats-bar{
  display:grid; grid-template-columns: repeat(5, minmax(0,1fr)); gap: var(--space-md);
  padding: var(--space-lg) var(--space-xl);
  border-bottom:1px solid var(--border-color);
  background: linear-gradient(180deg, rgba(255,255,255,.02), transparent);
}
.stat{
  background: var(--bg-elev);
  border:1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: var(--space-md);
  text-align:center;
}
.stat-label{ color: var(--muted); font-size: .85rem; }
.stat-value{ font-size: 1.15rem; font-weight: 800; }

/* ===== סרגל פילטרים ===== */
.filters-bar{
  display:grid; gap: var(--space-md);
  grid-template-columns: repeat(12, 1fr);
  align-items:end;
  padding: var(--space-xl);
  border-bottom:1px solid var(--border-color);
  background: linear-gradient(180deg, rgba(255,255,255,.02), transparent);
}
.filter-group{ display:grid; gap: var(--space-xs); }
.filter-actions{ display:flex; gap: var(--space-sm); justify-content:flex-end; align-items:center; }

/* מיקום עמודות */
.filter-group:nth-child(1){ grid-column: span 4; }   /* חיפוש */
.filter-group:nth-child(2){ grid-column: span 2; }   /* מיקום */
.filter-group:nth-child(3){ grid-column: span 2; }   /* ארגון */
.filter-group:nth-child(4){ grid-column: span 2; }   /* דרגה */
#dateRangeGroup{ grid-column: span 6; }              /* תאריכים */
.filter-actions{ grid-column: span 6; }

@media (max-width: 900px){
  .filters-bar{ grid-template-columns: repeat(6,1fr); }
  .filter-group:nth-child(1){ grid-column: span 6; }
  .filter-group:nth-child(2),
  .filter-group:nth-child(3),
  .filter-group:nth-child(4){ grid-column: span 3; }
  #dateRangeGroup{ grid-column: span 6; }
  .filter-actions{ grid-column: span 6; }
}
@media (max-width: 600px){
  .filters-bar{ grid-template-columns: repeat(4,1fr); }
  .filter-group, #dateRangeGroup, .filter-actions{ grid-column: span 4; }
}

/* קלטים וסלקטים */
label{ font-size:.9rem; color: var(--text-secondary); }
input[type="search"],
input[type="date"],
select{
  font: inherit;
  font-size: var(--font-size-sm);
  padding: var(--space-md);
  border:1px solid var(--border-color);
  border-radius: var(--radius-md);
  background: var(--bg-elev);
  color: var(--text-primary);
  box-shadow: var(--shadow-xs);
  transition: all var(--transition-fast) ease;
  width: 100%;
}
input[type="search"]:hover,
input[type="date"]:hover,
select:hover{
  border-color: var(--primary-300);
  box-shadow: var(--shadow-sm);
}
input[type="search"]:focus,
input[type="date"]:focus,
select:focus{
  border-color: var(--border-focus);
  outline: none;
  box-shadow: 0 0 0 3px rgba(59,130,246,.15);
}
.date-range{ display:flex; align-items:center; gap: var(--space-sm); }
.date-sep{ opacity:.6; }

/* ===== כפתורים ===== */
.btn{
  display:inline-flex; align-items:center; gap:.5rem;
  padding: .6rem .9rem;
  background: var(--primary-500);
  color:#fff; border:none; border-radius: var(--radius-md);
  cursor:pointer; box-shadow: var(--shadow-xs);
  transition: transform .05s ease, background var(--transition-fast) ease;
  white-space: nowrap;
}
.btn:hover{ background: var(--primary-700); }
.btn:active{ transform: translateY(1px); }
.btn i{ font-size: .95em; }
.btn-secondary{
  background: var(--bg-elev);
  color: var(--text-primary);
  border:1px solid var(--border-color);
}
.btn-secondary:hover{ background:#1e2230; }
.btn-small{
  min-width:auto;
  padding: var(--space-sm) var(--space-md);
  font-size: .85rem;
}

/* ===== תוצאות + פגינציה ===== */
.results-bar{
  display:flex; justify-content:space-between; align-items:center;
  gap: var(--space-md);
  padding: var(--space-md) var(--space-xl);
  border-bottom:1px solid var(--border-color);
  background: linear-gradient(180deg, rgba(255,255,255,.02), transparent);
}
.results-count{ color: var(--text-secondary); }
.pagination-controls{ display:flex; align-items:center; gap: var(--space-sm); }
.pagination-info{ color: var(--text-secondary); min-width: 8ch; text-align:center; }

/* ===== אזור תוכן ===== */
.content-area{ padding: var(--space-lg) var(--space-xl) var(--space-xl); }

/* ===== כרטיסים ===== */
.card{
  background: var(--bg-elev);
  border:1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  margin-block: var(--space-md);
  box-shadow: var(--shadow-xs);
}
.card-title{ margin:0 0 var(--space-sm) 0; font-size: 1.1rem; }
.card-list{
  display:grid; grid-template-columns: max-content 1fr; gap: var(--space-xs) var(--space-lg);
}
.card-list dt{ color: var(--muted); }
.card-list dd{ margin:0; }

/* ===== טבלה ===== */
.data-table{
  width:100%;
  border-collapse: collapse;
  background: var(--bg-elev);
  border:1px solid var(--border-color);
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: var(--shadow-xs);
}
.data-table caption{
  text-align: start;
  padding: var(--space-md);
  color: var(--muted);
  font-size: .95rem;
}
.data-table thead th{
  position: sticky; top: 0;
  background: #0f1320;
  color: var(--text-secondary);
  border-bottom:1px solid var(--border-color);
  padding: .75rem;
  font-weight: 600;
  user-select: none;
  cursor: pointer;
}
.data-table thead th .sort-icon{ margin-inline-start: .4rem; opacity:.75; }
.data-table tbody td{
  border-top:1px solid var(--border-color);
  padding: .7rem .75rem;
}
.data-table tbody tr:nth-child(odd){ background: rgba(255,255,255,.02); }

/* ===== Toast ===== */
.toast-container{
  position: fixed; top: var(--space-xl); left:50%; transform: translateX(-50%);
  display:flex; flex-direction:column; gap: var(--space-sm);
  z-index: 1500;
}
.toast{
  padding: .7rem 1rem; border-radius: var(--radius-md); color: #fff; font-weight:700;
  box-shadow: var(--shadow-md); opacity:0; transform: translateY(-8px);
  animation: slideIn .25s ease forwards;
}
.toast-info{ background:#334155; }
.toast-success{ background:#166534; }
.toast-warning{ background:#854d0e; }
.toast-error{ background:#7f1d1d; }
@keyframes slideIn{
  to{ opacity:1; transform: translateY(0); }
}

/* ===== שכבת טעינה ===== */
.loading-overlay{
  position: fixed; inset:0; background: rgba(0,0,0,.45);
  display: grid; place-items:center; opacity:0; pointer-events:none;
  transition: opacity var(--transition-fast) ease;
  z-index: 1200;
}
.loading-overlay.visible{ opacity:1; pointer-events:auto; }
.spinner{
  width: 48px; height: 48px; border-radius: 50%;
  border: 4px solid rgba(255,255,255,.2);
  border-top-color: #fff;
  animation: spin 1s linear infinite;
  margin-inline: auto;
}
.loading-text{ margin-top: var(--space-md); color:#fff; text-shadow: 0 1px 2px rgba(0,0,0,.4); }
@keyframes spin{ to{ transform: rotate(360deg); } }

/* ===== כפתור לראש העמוד ===== */
.back-to-top{
  position: fixed; inset-inline-end: var(--space-xl); inset-block-end: calc(var(--space-xl) + 56px);
  width: 48px; height: 48px; border-radius: 50%;
  background: var(--primary-500); color: #fff; border:none;
  display:grid; place-items:center; box-shadow: var(--shadow-sm);
  cursor: pointer; opacity:0; transform: translateY(10px);
  transition: all var(--transition-fast) ease;
  z-index: 1200;
}
.back-to-top.visible{ opacity:1; transform: translateY(0); }
.back-to-top:hover{ background: var(--primary-700); }

/* ===== תחתית ===== */
.footer-info{
  width: min(100%, var(--container-max));
  margin-inline: auto;
  margin-block: var(--space-xl);
  padding: var(--space-xl);
  background: var(--bg-primary);
  border:1px solid var(--border-color);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-xs);
  color: var(--text-secondary);
}
.footer-info a{ color: var(--primary-300); text-decoration:none; }
.footer-info a:hover{ color:#9ec1ff; text-decoration: underline; }

/* ===== רספונסיביות ===== */
@media (max-width: 900px){
  .results-bar, .content-area{ padding-inline: var(--space-lg); }
}
@media (max-width: 600px){
  .language-toggle{ inset-inline-end: var(--space-md); inset-block-start: var(--space-md); }
  .results-bar{ flex-direction: column; align-items: stretch; gap: var(--space-sm); }
  .pagination-controls{ justify-content: space-between; }
  .card{ padding: var(--space-md); }
  .data-table thead th{ font-size: var(--font-size-xs); }
  .data-table tbody td{ font-size: var(--font-size-xs); }
}

/* ===== Compatibility layer: match index.html + script.js ===== */

/* Visibility helpers (HTML/JS use class="hidden") */
.hidden{ display:none !important; }

/* "Skip to content" (HTML uses .sr-only instead of .skip-link) */
.sr-only{
  position:absolute; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}
.sr-only:focus{
  position:fixed; inset-inline-start: var(--space-lg); inset-block-start: var(--space-lg);
  width:auto; height:auto; margin:0; clip:auto; padding: var(--space-sm) var(--space-md);
  background: var(--primary-500); color:#fff; border-radius: var(--radius-sm); z-index:1000;
}

/* Utilities actually used in the HTML */
.relative{ position: relative; }
.mx-auto{ margin-inline:auto; }
.my-4{ margin-block: 1rem; }
.my-8{ margin-block: 2rem; }
.mt-2{ margin-top: .5rem; }
.mt-4{ margin-top: 1rem; }
.mb-8{ margin-bottom: 2rem; }
.text-center{ text-align:center; }

/* Content container alias (HTML uses .table-container) */
.table-container{ padding: var(--space-lg) var(--space-xl) var(--space-xl); }

/* Mobile filters toggle + collapsible filters bar */
.mobile-filters-toggle{
  display:none;
  margin: var(--space-lg);
  background: var(--bg-elev);
  border:1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: .55rem .8rem;
  box-shadow: var(--shadow-xs);
  align-items:center; gap:.5rem; cursor:pointer;
}
.mobile-filters-toggle i{ font-size: .95em; }
@media (max-width: 900px){
  .mobile-filters-toggle{ display:inline-flex; }
  /* collapse filters on mobile – opened when .open present (toggled by JS) */
  #filtersBar{ display:none; }
  #filtersBar.open{ display:block; }
}

/* Filters grid: index.html structure = .filters-bar > .filters-row > .filter-item */
.filters-bar{ padding: var(--space-xl); border-bottom:1px solid var(--border-color);
  background: linear-gradient(180deg, rgba(255,255,255,.02), transparent); }
.filters-row{
  display:grid; gap: var(--space-md);
  grid-template-columns: repeat(12, 1fr);
  align-items:end;
}
.filter-item{ display:grid; gap: var(--space-xs); }
#dateRangeGroup .date-range{ display:flex; align-items:center; gap: var(--space-sm); }
.filter-actions{ display:flex; gap: var(--space-sm); justify-content:flex-end; align-items:center; grid-column: span 6; }

/* Column layout similar to the original intent */
.filters-row .filter-item:nth-child(1){ grid-column: span 4; } /* search */
.filters-row .filter-item:nth-child(2){ grid-column: span 2; } /* location */
.filters-row .filter-item:nth-child(3){ grid-column: span 2; } /* org */
.filters-row .filter-item:nth-child(4){ grid-column: span 2; } /* rank */
#dateRangeGroup{ grid-column: span 6; }
@media (max-width: 900px){
  .filters-row{ grid-template-columns: repeat(6,1fr); }
  .filters-row .filter-item:nth-child(1){ grid-column: span 6; }
  .filters-row .filter-item:nth-child(2),
  .filters-row .filter-item:nth-child(3),
  .filters-row .filter-item:nth-child(4){ grid-column: span 3; }
  #dateRangeGroup{ grid-column: span 6; }
  .filter-actions{ grid-column: span 6; }
}
@media (max-width: 600px){
  .filters-row{ grid-template-columns: repeat(4,1fr); }
  .filter-item, #dateRangeGroup, .filter-actions{ grid-column: span 4; }
}

/* Button variants used by the HTML */
.btn-outline{
  background: transparent;
  color: var(--text-primary);
  border:1px solid var(--border-color);
}
.btn-outline:hover{ background:#1e2230; }
.btn-light{
  background: var(--bg-elev);
  color: var(--text-primary);
  border:1px solid var(--border-color);
}
.btn-light:hover{ background:#1e2230; }
.btn-link{
  background: transparent;
  color: var(--primary-300);
  border:none; padding-inline: .25rem;
}
.btn-link:hover{ color:#9ec1ff; text-decoration: underline; }

/* Results counter + pagination (HTML classes) */
.results-counter{ color: var(--text-secondary); padding: 0 var(--space-xl) var(--space-md); }
.pagination{
  display:flex; justify-content:center; align-items:center; gap: var(--space-sm);
  padding: var(--space-md) var(--space-xl);
}
.page-info{ color: var(--text-secondary); min-width: 8ch; text-align:center; }

/* Cards: match the markup rendered by script.js */
.cards{
  display:grid; gap: var(--space-md);
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
}
.card{ /* base already exists; just ensure spacing within cards grid */ margin:0; }
.card__title{
  display:flex; justify-content:space-between; align-items:baseline;
  margin:0 0 var(--space-sm) 0; font-size: 1.1rem;
}
.card__title small{ color: var(--muted); font-weight:600; }
.card__list{
  list-style:none; padding:0; margin:0;
  display:grid; gap: .35rem;
}
.card__list li b{ color: var(--muted); font-weight:600; }

/* Table sort indicators (script.js toggles th.sort-asc / th.sort-desc) */
.data-table thead th.sort-asc::after{ content: " ▲"; opacity:.7; font-size:.85em; }
.data-table thead th.sort-desc::after{ content: " ▼"; opacity:.7; font-size:.85em; }

/* Toasts: support BEM-style modifiers from JS ("toast--success", etc.) */
.toast--info, .toast-info{ background:#334155; }
.toast--success, .toast-success{ background:#166534; }
.toast--warning, .toast-warning{ background:#854d0e; }
.toast--error, .toast-error{ background:#7f1d1d; }

/* Loading overlay: visible by default; JS hides/shows via .hidden */
.loading-overlay{
  opacity:1; pointer-events:auto; /* override earlier opacity:0/pointer-events:none */
}

/* Back-to-top: visible by default (JS does not toggle a .visible class) */
.back-to-top{ opacity:1; transform: none; }
.back-to-top.hidden{ opacity:0; transform: translateY(10px); pointer-events:none; }

/* Empty state used by #emptyState */
.empty-state{
  width: min(100%, var(--container-max));
  margin: var(--space-xl) auto;
  padding: var(--space-xl);
  background: var(--bg-primary);
  border:1px solid var(--border-color);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-xs);
  color: var(--text-secondary);
  text-align:center;
}

/* Statistics cards used by index.html (.stats-grid / .stat-card) */
.stats-grid{
  display:grid; gap: var(--space-md);
  grid-template-columns: repeat(4, minmax(0,1fr));
  padding: var(--space-lg) var(--space-xl);
}
.stat-card{
  background: var(--bg-elev);
  border:1px solid var(--border-color);
  border-radius: var(--radius-md);
  padding: var(--space-lg);
  text-align:center;
  box-shadow: var(--shadow-xs);
}
.stat-card h3{ color: var(--muted); font-size: .95rem; margin:0 0 .35rem 0; }
.stat-card p{ font-size: 1.15rem; font-weight: 800; margin:0; }
@media (max-width: 900px){
  .stats-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}
@media (max-width: 600px){
  .stats-grid{ grid-template-columns: 1fr; }
}

